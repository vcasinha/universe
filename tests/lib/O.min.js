/*! O 2015-02-16 */
!function(a){var b=function(){this.__items={},this.__onloadCallbacks=[]};b.prototype.__onloadCallback=function(){this.__onloadCallbacks.forEach(function(a){a()})},b.prototype.unique=function(a){return a.reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[])},b.prototype.ready=function(a){this.__onloadCallbacks.push(a)},b.prototype.instance=b.i=function(a,b){var c=this.get(a);if("function"!=typeof c)throw"(O.instance) "+a+" is not loaded";return(void 0===b||b.constructor!==Array)&&(b=Array.prototype.slice.call(arguments),b.shift()),new(function(a,b){var c=[a].concat(b);return a.bind.apply(a,c)}(c,b))},b.prototype.register=function(a,c){if("function"!=typeof c)throw"Invalid constructor";c.prototype=c.prototype||{},c.prototype.__name__=c.__name__||a,c.prototype.constructor=c,c.prototype.__classes__=c.prototype.classes||[],delete c.prototype.classes;var d=c.prototype.__classes__,e=c;c=function(){var a=arguments;b.unique(d),d.forEach(function(c){var d;d="function"==typeof d?c:b.get(c),d.apply(this,a)}.bind(this)),e.apply(this,a)};if(d[0]){var f=d[0];if("string"==typeof f){var g=b.get(f);if(void 0===g)throw"unknown object '"+f+"'";f=g}b.extend(c.prototype,Object.create(f.prototype))}return c.prototype=this.extend(c.prototype,e.prototype),this.set(a,c),this},b.prototype.createClass=function(a){return a},b.prototype.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"!=typeof g&&"function"!=typeof g&&(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&("object"==typeof d||(e=d.constructor===Array))?(e?(e=!1,f=c&&c.constructor===Array?c:[]):f=c&&"object"==typeof c?c:{},g[b]=this.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},b.prototype.instanceOf=function(a){return a in this.__proto__},b.prototype.clone=function(a,b){if(null==a||"object"!=typeof a)return b;for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},b.prototype.fill=function(a){"function"==typeof a.instanceOf&&(a=a.dump()),console.log("fill",a),this.extend(this.__items,a)},b.prototype.set=function(a,b){return this.__items[a]=b,this},b.prototype.get=function(a,b){var c=b;return void 0!==this.__items[a]&&(c=this.__items[a]),c},b.prototype.dump=function(){return this.__items},b.prototype.forEach=function(a){for(var b=0;b<this.__items.length;b++)a(this.__items[b],b);return this},b.prototype.constructor=b;var c=new b;c.extend(b,c).set("o",b),a.O=b}(window);